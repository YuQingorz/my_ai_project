<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{% block title %}默认标题{% endblock %}</title>
    <!-- 引入本地Bootstrap CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='node_modules/bootstrap/dist/css/bootstrap.min.css') }}">
    <!-- 自定义CSS文件 -->
    <link rel="stylesheet" href="{{ url_for('static', filename='custom.css') }}">
</head>
<body>
<div id="particles-js"></div>

<!-- 开关按钮 -->
<button id="toggleParticles" class="btn btn-primary position-fixed" style="bottom: 20px; right: 20px;">切换粒子效果</button>

<!-- 导航栏 -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container">
    <a class="navbar-brand" href="{{ url_for('index') }}">AI工具类网站</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('index') }}">AI工具</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('index') }}">项目</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('index') }}">论坛</a>
        </li>
      </ul>
      <ul class="navbar-nav ml-auto">
        {% if g.user %}
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('index') }}">{{ g.user.username }}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('index') }}">登出</a>
        </li>
        {% else %}
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('index') }}">登录</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('index') }}">注册</a>
        </li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>

<!-- 页面内容 -->
<div class="container mt-4">
    {% for message in get_flashed_messages() %}
    <div class="alert alert-info">{{ message }}</div>
    {% endfor %}
    {% block content %}{% endblock %}
</div>

<!-- 引入本地Bootstrap JavaScript和jQuery -->
<script src="{{ url_for('static', filename='node_modules/jquery/dist/jquery.min.js') }}"></script>
<script src="{{ url_for('static', filename='node_modules/@popperjs/core/dist/umd/popper.min.js') }}"></script>
<script src="{{ url_for('static', filename='node_modules/bootstrap/dist/js/bootstrap.min.js') }}"></script>

<script src="{{ url_for('static', filename='js/trianglify_settings.js') }}"></script>
<script src="{{ url_for('static', filename='js/trianglify.min.js') }}"></script>

<!-- 引入 particles.js -->
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

<!-- 调用 particlesJS() 函数 -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  if (typeof particlesJS === 'function') {
    particlesJS('particles-js', {
      // 其他配置项保持不变
      "particles": {
      "number": {
        "value": 80,
        "density": {
          "enable": true,
          "value_area": 800
        }
      },
      "color": {
        "value": "#ffffff"
      },
      "shape": {
        "type": "circle",
        "stroke": {
          "width": 0,
          "color": "#000000"
        },
        "polygon": {
          "nb_sides": 5
        }
      },
      "opacity": {
        "value": 0.5,
        "random": false,
        "anim": {
          "enable": false,
          "speed": 1,
          "opacity_min": 0.1,
          "sync": false
        }
      },
      "size": {
        "value": 3,
        "random": true,
        "anim": {
          "enable": false,
          "speed": 40,
          "size_min": 0.1,
          "sync": false
        }
      },
      "line_linked": {
        "enable": true,
        "distance": 150,
        "color": "#ffffff",
        "opacity": 0.4,
        "width": 1
      },
      "move": {
        "enable": true,
        "speed": 6,
        "direction": "none",
        "random": false,
        "straight": false,
        "out_mode": "out",
        "bounce": false,
        "attract": {
          "enable": false,
          "rotateX": 600,
          "rotateY": 1200
        }
      }
    },
    "interactivity": {
      "detect_on": "canvas",
      "events": {
        "onhover": {
          "enable": true,
          "mode": "repulse"
        },
        "onclick": {
          "enable": true,
          "mode": "push"
        },
        "resize": true
      },
      "modes": {
        "grab": {
          "distance": 400,
          "line_linked": {
            "opacity": 1
          }
        },
        "bubble": {
          "distance": 400,
          "size": 40,
          "duration": 2,
          "opacity": 8,
          "speed": 3
        },
        "repulse": {
          "distance": 200,
          "duration": 0.4
        },
        "push": {
          "particles_nb": 4
        },
        "remove": {
          "particles_nb": 2
        }
      }
    },
    "retina_detect": true
    });
  } else {
    console.error('particles.js 文件未正确加载，请检查文件路径是否正确。');
  }
});
</script>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
